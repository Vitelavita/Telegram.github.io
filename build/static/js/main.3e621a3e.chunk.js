(this["webpackJsonpvite-legram"]=this["webpackJsonpvite-legram"]||[]).push([[0],{101:function(e,t,n){},108:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var c=n(5),a=n.n(c),s=n(46),r=n.n(s),i=(n(101),n(41)),o=n(16),l=n(143),d=n(141),j=n(84),u=n.n(j),b=n(22),h=n(73);n(123),n(106),n(124),n(122);h.a.initializeApp({apiKey:"AIzaSyDpx2wHDPYOMUPiU8SP9C06uA0c_oJU25s",authDomain:"vite-legram.firebaseapp.com",projectId:"vite-legram",storageBucket:"vite-legram.appspot.com",messagingSenderId:"718663980669",appId:"1:718663980669:web:f7e4bdda34eaaffcef4314",measurementId:"G-439SQ3R5QR"}),h.a.firestore();var m=h.a,O=(n(108),n(12));function f(e){var t,n,a=e.massages,s=Object(c.useState)(""),r=Object(o.a)(s,2),i=r[0],j=r[1],h=Object(c.useState)(),f=Object(o.a)(h,2),p=f[0],v=f[1],x=Object(b.f)().channelId,g=m.firestore();Object(c.useEffect)((function(){var e=g.collection("channels").doc(x).onSnapshot((function(e){return j(e.data())}));return function(){e()}}),[g,x]),Object(c.useEffect)((function(){v(Math.floor(5e3*Math.random()))}),[x]);var N="https://avatars.dicebear.com/api/human/".concat(p,".svg");return Object(O.jsx)("div",{className:"header",children:Object(O.jsxs)("div",{className:"header_main",children:[Object(O.jsxs)("div",{className:"header_left",children:[Object(O.jsx)(l.a,{src:N}),Object(O.jsxs)("div",{className:"header_info",children:[Object(O.jsx)("strong",{children:i.channelName}),Object(O.jsxs)("p",{children:["Last seen at  ",new Date(null===(t=a[a.length-1])||void 0===t||null===(n=t.timeStamp)||void 0===n?void 0:n.toDate()).toUTCString()]})]})]}),Object(O.jsx)(d.a,{children:Object(O.jsx)(u.a,{})})]})})}n(112);var p=n(85),v=n.n(p),x=n(86),g=n.n(x),N=n(87),S=n.n(N),_=n(88),y=n.n(_);function U(e){var t=e.handleChange,n=e.setInputText,c=e.inputText;return Object(O.jsx)("div",{className:"message_sender",children:Object(O.jsx)("form",{onSubmit:function(e){return t(e)},children:Object(O.jsxs)("div",{className:"message",children:[Object(O.jsx)(v.a,{}),Object(O.jsx)("div",{className:"send_input",children:Object(O.jsx)("input",{placeholder:"Write Your Message Here",value:c,onChange:function(e){return n(e.target.value)}})}),Object(O.jsx)("button",{type:"submit",className:"hidden_btn"}),Object(O.jsx)(g.a,{}),Object(O.jsx)(S.a,{}),Object(O.jsx)(y.a,{})]})})})}n(113);function w(e){var t=e.massages,n=e.currentUser;return Object(O.jsx)("div",{className:"chat",children:t.map((function(e){return Object(O.jsxs)("div",{className:"message_body ".concat(n.displayName===e.displayName&&"message_body_receiver"," "),children:[Object(O.jsx)(l.a,{src:null===e||void 0===e?void 0:e.userPhotoURL}),Object(O.jsx)("div",{className:"message_container",children:Object(O.jsx)("p",{className:"messages ".concat(n.displayName===e.displayName&&"message_receiver"," "),children:null===e||void 0===e?void 0:e.massages})})]},e.id)}))})}function I(){var e=Object(b.f)().channelId,t=Object(i.c)((function(e){return e.auth})).currentUser,n=Object(c.useState)([]),a=Object(o.a)(n,2),s=a[0],r=a[1],l=Object(c.useState)([]),d=Object(o.a)(l,2),j=d[0],u=d[1],h=Object(c.useState)(""),p=Object(o.a)(h,2),v=p[0],x=p[1],g=m.firestore();return Object(c.useEffect)((function(){e&&g.collection("channels").onSnapshot((function(e){return r(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[g,s,e]),Object(c.useEffect)((function(){e&&g.collection("channels").doc(e).collection("massages").orderBy("timeStamp","asc").onSnapshot((function(e){u(e.docs.map((function(e){return e.data()})))}))}),[e,g,u]),console.log(j),Object(O.jsxs)("div",{style:{flex:"0.7"},children:[Object(O.jsx)(f,{massages:j}),Object(O.jsx)(w,{currentUser:t,massages:j}),Object(O.jsx)(U,{inputText:v,handleChange:function(n){n.preventDefault(),console.log(v),e&&(g.collection("channels").doc(e).collection("massages").add({massages:v,timeStamp:m.firestore.FieldValue.serverTimestamp(),displayName:t.displayName,userPhotoURL:t.photoURL}),x(""))},setInputText:x})]})}var A=n(92),C=n.n(A),F=n(93),k=n.n(F),E=(n(114),n(49));n(115);function P(e){var t,n=e.id,a=e.channelName,s=Object(c.useState)([]),r=Object(o.a)(s,2),i=r[0],d=r[1],j=m.firestore(),u=Object(c.useState)(),b=Object(o.a)(u,2),h=b[0],f=b[1];Object(c.useEffect)((function(){n&&j.collection("channels").doc(n).collection("massages").orderBy("timeStamp","desc").onSnapshot((function(e){d(e.docs.map((function(e){return e.data()})))}))}),[n,j,d]),Object(c.useEffect)((function(){f(Math.floor(5e3*Math.random()))}),[n]);var p="https://avatars.dicebear.com/api/human/".concat(h,".svg");return Object(O.jsxs)(E.b,{className:"sidebar_row_main",to:"/channel/".concat(n),children:[Object(O.jsxs)("div",{className:"sidebar_row",children:[Object(O.jsxs)("div",{className:"sidebar_left",children:[Object(O.jsx)(l.a,{src:p}),Object(O.jsxs)("div",{className:"sidebar_info",children:[Object(O.jsx)("strong",{children:a}),Object(O.jsx)("p",{className:"text",children:null===(t=i[0])||void 0===t?void 0:t.massages})]})]}),Object(O.jsx)("p",{children:"time"})]}),Object(O.jsx)("div",{className:"line"})]})}var L=n(142),T=n(90),D=n.n(T),R=n(89),M=n.n(R),B=n(91),G=n.n(B);n(116);function J(){var e=Object(i.c)((function(e){return e.auth})).currentUser;return Object(O.jsx)("div",{className:"sidebar_bottom_main",children:Object(O.jsxs)("div",{className:"sidebar_bottom_icons",children:[Object(O.jsx)(l.a,{src:(null===e||void 0===e?void 0:e.photoURL)||"https://pagesix.com/wp-content/uploads/sites/3/2020/03/bebe-rexha-30.jpg?quality=80&strip=all"}),Object(O.jsx)(M.a,{}),Object(O.jsxs)(L.a,{smDown:!0,children:[Object(O.jsx)(D.a,{}),Object(O.jsx)(G.a,{})]})]})})}function z(e){var t=e.handleAddNewChannel,n=e.channel;return Object(O.jsxs)("div",{className:"sidebar",children:[Object(O.jsxs)("div",{className:"sidebar_header",children:[Object(O.jsxs)("div",{className:"search",children:[Object(O.jsx)(C.a,{}),Object(O.jsx)("input",{type:"text",placeholder:"Search for channels or users"})]}),Object(O.jsx)(d.a,{onClick:t,children:Object(O.jsx)(k.a,{})})]}),n.map((function(e){return Object(O.jsx)(P,{id:e.id,channelName:e.data.channelName},e.id)})),Object(O.jsx)(J,{})]})}n(117);function H(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=m.firestore();Object(c.useEffect)((function(){var e=s.collection("channels").onSnapshot((function(e){return a(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[s,n]);return Object(O.jsx)("div",{className:"chat_page",children:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z,{channel:n,handleAddNewChannel:function(){var e=prompt("Enter a Channel Name");e&&s.collection("channels").add({channelName:e})}}),Object(O.jsx)(b.c,{children:Object(O.jsx)(b.a,{path:"/channel/:channelId",children:Object(O.jsx)(I,{})})})]})})}var Q=n(0),V=n.n(Q),W=n(4),Y=(n(118),"USER_SIGN_IN"),q="USER_SIGN_OUT";function K(){var e=Object(i.b)(),t=function(){var t=Object(W.a)(V.a.mark((function t(n){var c,a,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=m.auth(),"facebook"===n&&(c=new m.auth.FacebookAuthProvider),"google"===n&&(c=new m.auth.GoogleAuthProvider),t.prev=3,t.next=6,a.signInWithPopup(c);case 6:s=t.sent,console.log(s.user),e((r=s.user,{type:Y,payload:r})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}var r}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"login",children:[Object(O.jsx)("img",{src:X,alt:" Logo"}),Object(O.jsx)("button",{onClick:function(){t("google")},children:"Login to Vite-legram"})]})}var X="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi.fbcd.co%2Fproducts%2Foriginal%2F53f47d68e53f7d439d78ef4565fbe209afb23cd509bf3275dc1cbad4efebb224.jpg&f=1&nofb=1";function Z(){var e=Object(i.c)((function(e){return e.auth})).isAuthenticated;return Object(O.jsx)("div",{className:"main_page",children:e?Object(O.jsx)(H,{}):Object(O.jsx)(K,{})})}n(119);var $=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(Z,{})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))},te=n(60),ne=n(61),ce={isAuthenticated:!1,currentUser:null},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case Y:return Object(ne.a)(Object(ne.a)({},e),{},{isAuthenticated:!0,currentUser:c});case q:return Object(ne.a)(Object(ne.a)({},e),{},{isAuthenticated:!1,currentUser:null});default:return e}},se=Object(te.b)({auth:ae}),re=n(94),ie=[n.n(re).a],oe=Object(te.c)(se,te.a.apply(void 0,ie));r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(i.a,{store:oe,children:Object(O.jsx)(E.a,{children:Object(O.jsx)($,{})})})}),document.getElementById("root")),ee()}},[[120,1,2]]]);
//# sourceMappingURL=main.3e621a3e.chunk.js.map